# zero_thickness_repair

Use this module to repair Abaqus .inp files with node placement errors in zero-thickness 3D elements, such as cohesive elements. This can occur sometimes when, due to precision errors, nodes move slightly and the node numbering scheme is disrupted. Signs this has happened include the Abaqus preprocessor throwing an error due to node numbering in zero-thickness elements, despite generating the elements automatically using the CAE environment. 
You may use the script as a standalone, or import it as a module into your own python script (useful for using it on a batch of .inp files, or as I have in the geometry generation scripts). 
To use as a standalone, it may be convenient to place the script and the .inp file in the same directory. If the .inp file is in a different directory, then use the full path of the .inp file instead of its name in the instructions below.
To run the script using the command prompt, open the command prompt and navigate to the directory containing the script. Then, enter "inp_editor.py -i <inp_file> -n <new_inp_file> -e  <element_types> -t <tolerance>" without quotes or <>’s, where <inp_file> is the name of your .inp file, <new_inp_file> is the name of the new .inp file to be created, <element_types> is either “cohesives” or “all” (without quotes), and <tolerance> is the maximum distance in any one direction between two nodes for the two nodes to still be considered in the "same place." For example, if the x-y-z coordinates of node 1 are (0.12, 1.5, 1.6001) and the coordinates of node 2 are (0.1203, 1.5, 1.6), setting the tolerance to .001 will consider the nodes to be in the same place and unify their coordinates, but setting the tolerance to .0001 will not. 
You may also run the script by editing it, saving it, and then running it (either through the command line or by double-clicking on it). To do so, open the script in a text editor and scroll to the end. Underneath the line that reads “if __name__ == ‘__main__’:”, edit the values for default_old_inp_file,    default_new_inp_file, default_element_types, and default_tolerance. Then, save the script and run it.
To use the script as a module in another python script, use the import command at the start of your script (import zero_thickness_repair). Make sure a copy of zero_thickness_repair.py is saved in the same location as the python script you are writing. If you are calling the script from the Abaqus CAE, follow the instructions in this guide for importing your own scripts. You can then call the function zero_thickness_repair.coord_snap() with the arguments described above.
